library(dplyr)
## Menampilkan hasil satu provinsi ##
tempSistem<-filter(tempSistem,Provinsi=="Aceh")
## Membuat tabel Level setiap aspek ##
aspekSys<-c("1. Regulasi/peraturan daerah","2. Integrasi dalam Perencanaan Pembangunan Daerah", "3. Proses", "7. Data dan Informasi", "9. Pemantauan, Evaluasi, dan Pelaporan")
LevelReg<-mean(as.matrix(tempSistem[,2:3])); LevelInt<-mean(as.matrix(tempSistem[4:8])); LevelProses<-mean(as.matrix(tempSistem[9:13])); LevelData<-mean(as.matrix(tempSistem[14:16])); LevelPEP<-mean(as.matrix(tempSistem[17:20]))
allLevelSys<-as.data.frame(t(cbind(LevelReg,LevelInt, LevelProses, LevelData, LevelPEP)))
allLevelSys<-round(allLevelSys,digits = 2)
gapReg<-5-LevelReg; gapInt<-5-LevelInt; gapProses<-5-LevelProses; gapData<-5-LevelData; gapPEP<-5-LevelPEP
allGapSys<-as.data.frame(t(cbind(gapReg,gapInt,gapProses,gapData,gapPEP)))
allGapSys<-round(allGapSys, digits=2)
tingkatSys<-as.data.frame(cbind(aspekSys, allLevelSys, allGapSys))
colnames(tingkatSys)<-c("Aspek Penilaian","Level","GAP")
tingkatSys<-datatable(tingkatSys,escape = FALSE, rownames = FALSE)
View(tingkatSys)
## Membuat bar chart untuk tingkat Sistem ##
t_tempSistem <- t(tempSistem[2:length(tempSistem)])
provSys <- rowMeans(t_tempSistem)
provSys<-round(provSys, digits = 2)
graphSistem<-as.data.frame(cbind(indikatorSys,provSys[1:19],provSys[20:38]))
colnames(graphSistem)<-c("Indikator","Level","GAP")
View(graphSistem)
ggplot(mpg, aes(y = Indikator)) +
geom_bar(aes(fill = drv), position = position_stack(reverse = TRUE)) +
theme(legend.position = "top")
library(ggplot2)
ggplot(mpg, aes(y = Indikator)) +
geom_bar(aes(fill = drv), position = position_stack(reverse = TRUE)) +
theme(legend.position = "top")
ggplot(graphSistem, aes(y = Indikator)) +
geom_bar(aes(fill = drv), position = position_stack(reverse = TRUE)) +
theme(legend.position = "top")
ggplot(graphSistem, aes(y = Indikator)) +
geom_bar(aes(fill = Level), position = position_stack(reverse = TRUE)) +
theme(legend.position = "top")
ggplot(graphSistem, aes(x=Level, y = Indikator)) +
geom_bar(aes(fill = GAP), position = position_stack(reverse = TRUE)) +
theme(legend.position = "top")
ggplot(graphSistem, aes(x=Level, y = Indikator)) +
geom_bar(aes(fill = variable), position = position_stack(reverse = TRUE)) +
theme(legend.position = "top")
View(t_tempSistem)
View(tempSistem)
ggplot(graphSistem, aes( y=Level, x=Indikator)) +
geom_bar(position="fill", stat="identity")
ggplot(graphSistem, aes( y=Level, x=Indikator)) +
geom_bar(position="stack", stat="identity")
ggplot(graphSistem, aes( y=Level, x=Indikator)) +
geom_bar(position = position_stack(reverse = TRUE), stat="identity")
ggplot(graphSistem, aes( y=Indikator, x=Level)) +
geom_bar(position="stack", stat="identity")
ggplot(graphSistem, aes(fill=GAP, y=Indikator, x=Level)) +
geom_bar(position="stack", stat="identity")
ggplot(graphSistem, aes(y=Indikator, x=Level)) +
geom_bar(aes=(fill=GAP)position="stack", stat="identity")
ggplot(graphSistem, aes(y=Indikator, x=Level)) +
geom_bar(aes=(fill=GAP), position="stack", stat="identity")
ggplot(graphSistem, aes(y=Indikator, x=Level)) +
geom_col(aes=(fill=GAP), position="stack", stat="identity")
)
ggplot(graphSistem, aes(y=Indikator, x=Level)) +
geom_col(aes=(fill=GAP))
ggplot(data=graphSistem, aes(y=Indikator, x=Level)) +
geom_col(aes=(fill=GAP))
ggplot(graphSistem, aes(y=Indikator, x=Level)) +
geom_col(aes=(fill=graphSistem$GAP))
ggplot(graphSistem, aes(y=GAP, x=Level, fill=Indikator)) +
geom_bar(stat="identity") +
coord_flip()
# graphSistem <- tablesCDA$summarySystem
plot_ly(graphSistem, y=~Indikator, x=~Level, type='bar', name='Level', orientation= 'h')%>%
add_trace(x=~GAP, name= 'GAP') %>%
layout(yaxis=list(title=''), xaxis = list(title = ''), barmode='stack')  %>%
layout(xaxis = list(titlefont = list(size = 12), tickfont = list(size = 12)),
yaxis = list(titlefont = list(size = 10), tickfont = list(size = 10)) ) %>%
layout(legend = list(orientation = 'h'))
library(plotly)
# graphSistem <- tablesCDA$summarySystem
plot_ly(graphSistem, y=~Indikator, x=~Level, type='bar', name='Level', orientation= 'h')%>%
add_trace(x=~GAP, name= 'GAP') %>%
layout(yaxis=list(title=''), xaxis = list(title = ''), barmode='stack')  %>%
layout(xaxis = list(titlefont = list(size = 12), tickfont = list(size = 12)),
yaxis = list(titlefont = list(size = 10), tickfont = list(size = 10)) ) %>%
layout(legend = list(orientation = 'h'))
# graphSistem <- tablesCDA$summarySystem
plot_ly(graphSistem, y=~Indikator, x=~Level, type='bar', name='Level', orientation= 'h')%>%
add_trace(x=~GAP, name= 'GAP') %>%
layout(yaxis=list(title=''), xaxis = list(title = ''), barmode='stack')  %>%
layout(xaxis = list(titlefont = list(size = 12), tickfont = list(size = 12)),
yaxis = list(titlefont = list(size = 10)) ) %>%
layout(legend = list(orientation = 'h'))
ggplot(graphSistem, aes(y=Indikator, x=Level)) +
geom_bar(position="stack", stat="identity")
ggplot(graphSistem, aes(y=Indikator, x=Level)) +
geom_bar(position="stack", stat="identity") +
add_trace(x=~GAP, name= 'GAP')
ggplot(graphSistem, aes(y=Indikator, x=Level)) +
geom_bar(position="stack", stat="identity") +
add_trace(x=~GAP, name= 'GAP')
ggplot(graphSistem, aes(y=Indikator, x=Level)) +
geom_bar(position="stack", stat="identity") +
add_trace(x=GAP, name= 'GAP')
ggplot(graphSistem, aes(y=Indikator, x=Level)) +
geom_bar(position="stack", stat="identity") +
add_trace(x=GAP, graphSistem)
ggplot(graphSistem, aes(y=Indikator, x=Level)) +
geom_bar(position="stack", stat="identity") +
add_trace(graphSistem$GAP, graphSistem)
ggplot(graphSistem, aes(y=Indikator, x=Level)) +
geom_bar(position="stack", stat="identity") +
add_trace(graphSistem$GAP, GAP)
ggplot(graphSistem, aes(y=Indikator, x=Level)) +
geom_bar(position="stack", stat="identity") +
add_trace(graphSistem$GAP)
ggplot(graphSistem, aes(y=Indikator, x=Level)) +
geom_bar(position="stack", stat="identity") +
add_trace(GAP)
ggplot(graphSistem, aes(y=Indikator, x=Level)) +
geom_bar(position="stack", stat="identity") +
add_trace(~GAP)
a <- ggplot(graphSistem, aes(y=Indikator, x=Level)) +
geom_bar(position="stack", stat="identity")
b <- ggplotly(a)
b %>% add_trace(x=~GAP, name= 'GAP')
b %>% add_trace(x=~GAP, name= 'GAP') %>% layout(yaxis=list(title=''), xaxis = list(title = ''), barmode='stack')
b %>% add_bar(x=~GAP, name= 'GAP')
b %>% add_bars(x=~GAP, name= 'GAP')
a <- ggplot(graphSistem, aes(y=Indikator, x=Level)) +
geom_bar( stat="identity")
b <- ggplotly(a)
b
a <- ggplot(graphSistem, aes(x=Indikator, y=Level)) +
geom_bar(stat="identity")
b <- ggplotly(a)
b
ggplot(mpg, aes(y = Indikator)) +
geom_bar(aes(fill = drv), position = position_stack(reverse = TRUE)) +
theme(legend.position = "top")
ggplot(graphSistem, aes( y=Level, x=Indikator)) +
geom_bar(position="fill", stat="identity")
a <- ggplot(graphSistem, aes(x=Level, y=Indikator)) +
geom_bar(position="fill", stat="identity")
b <- ggplotly(a)
b
b %>% add_trace(x=~GAP, name= 'GAP') %>% layout(yaxis=list(title=''), xaxis = list(title = ''), barmode='stack')
a <- ggplot(graphSistem, aes(x=Level, y=Indikator)) +
geom_bar(position="dogde", stat="identity")
b <- ggplotly(a)
a <- ggplot(graphSistem, aes(x=Level, y=Indikator)) +
geom_bar(position="dodge", stat="identity")
b <- ggplotly(a)
b
b %>% add_trace(x=~GAP, name= 'GAP') %>% layout(yaxis=list(title=''), xaxis = list(title = ''), barmode='stack')
b %>% add_trace(x=~GAP, name= 'GAP', inherit = FALSE) %>% layout(yaxis=list(title=''), xaxis = list(title = ''), barmode='stack')
b %>% add_trace(x=~GAP, name= 'GAP', graphSistem) %>% layout(yaxis=list(title=''), xaxis = list(title = ''), barmode='stack')
# graphSistem <- tablesCDA$summarySystem
ggplotly(graphSistem, y=~Indikator, x=~Level, type='bar', name='Level', orientation= 'h')%>%
add_trace(x=~GAP, name= 'GAP') %>%
layout(yaxis=list(title=''), xaxis = list(title = ''), barmode='stack')  %>%
layout(xaxis = list(titlefont = list(size = 12), tickfont = list(size = 12)),
yaxis = list(titlefont = list(size = 10)) ) %>%
layout(legend = list(orientation = 'h'))
plot_ly
# graphSistem <- tablesCDA$summarySystem
plot_ly(graphSistem, y=~Indikator, x=~Level, type='bar', name='Level', orientation= 'h')%>%
add_trace(x=~GAP, name= 'GAP') %>%
layout(yaxis=list(title=''), xaxis = list(title = ''), barmode='stack')  %>%
layout(xaxis = list(titlefont = list(size = 12), tickfont = list(size = 12)),
yaxis = list(titlefont = list(size = 10)) ) %>%
layout(legend = list(orientation = 'h'))
shiny::runApp()
library(httr)
library(jsonlite)
library(readr)
kobo_server_url <- "https://kf.kobotoolbox.org/"
kc_server_url <- "https://kc.kobotoolbox.org/"
form_moodle <- 612594 #Individu
## Individu ##
url_moodle<- paste0(kc_server_url,"api/v1/data/",form_moodle,".csv")
rawdata_moodle <- GET(url_moodle,authenticate("cdna2019","Icraf2019!"),progress())
dataMoodle <- read_csv(content(rawdata_moodle,"raw",encoding = "UTF-8"))
saveRDS(dataMoodle, "data/dataMoodle")
tempData <-readRDS("data/dataMoodle")
tempData$`profil/gender` <- NULL; tempData$`profil/nama` <- NULL; tempData$`profil/provinsi` <- NULL; tempData$`profil/tanggal` <- NULL; tempData$`profil/institusi` <- NULL; tempData$`profil/noHP` <- NULL; tempData$`profil/email` <- NULL
tempData$`meta/instanceID`<-NULL; tempData$`__version__`<-NULL; tempData$`_uuid`<-NULL; tempData$`_submission_time`<-NULL; tempData$`_tags`<-NULL; tempData$`_notes`<-NULL; tempData$`_version_`<-NULL; tempData$`_validation_status`<-NULL
tempData$`sdm_i1/sdm_i2/alasan` <- NULL; tempData$`sdm_i1/sdm_i2/alasan_001` <- NULL
for (i in 2:9){
eval(parse(text=paste0("tempData$`sdm_i1/sdm_i3/alasan_00",i,"`","<-NULL")))
}
for (i in 10:11){
eval(parse(text=paste0("tempData$`sdm_i1/sdm_i3/alasan_0",i,"`","<-NULL")))
}
for (i in 12:25){
eval(parse(text=paste0("tempData$`sdm_i1/sdm_i4/alasan_0",i,"`","<-NULL")))
}
for (i in 26:28){
eval(parse(text=paste0("tempData$`sdm_i1/sdm_i5/alasan_0",i,"`","<-NULL")))
}
tempData[tempData == "n/a"]  <- NA
tempData <- as.data.frame(tempData)
View(tempData)
library(dplyr)
library(ggplot2)
library(DT)
library(tidyr)
library(plotly)
library(httr)
library(jsonlite)
library(readr)
kobo_server_url <- "https://kf.kobotoolbox.org/"
kc_server_url <- "https://kc.kobotoolbox.org/"
form_ind <- 327418 #Individu
## Individu ##
url_ind <- paste0(kc_server_url,"api/v1/data/",form_ind,".csv")
rawdata_ind <- GET(url_ind,authenticate("cdna2019","Icraf2019!"),progress())
dataIndividu <- read_csv(content(rawdata_ind,"raw",encoding = "UTF-8"))
saveRDS(dataIndividu, "data/dataIndividu")
summInputInd<-readRDS("data/dataIndividu")
View(dataIndividu)
indikatorOrg <-read.table("init/organisasi.csv", header=TRUE, sep=",")
summIndikatorOrg <-as.data.frame(unique(indikatorOrg$Kapasitas_Fungsional))
indikatorOrg <-read.table("init/organisasi.csv", header=TRUE, sep=",")
library(readr)
organisasi <- read_csv("init/organisasi.csv")
View(organisasi)
# indikatorOrg <-read.table("init/organisasi.csv", header=TRUE, sep=",")
indikatorOrg <- read_csv("init/organisasi.csv", header=TRUE, sep=";")
summIndikatorOrg <-as.data.frame(unique(indikatorOrg$perbaikan))
# indikatorOrg <-read.table("init/organisasi.csv", header=TRUE, sep=",")
indikatorOrg <- read_csv("init/organisasi.csv", sep=";")
# indikatorOrg <-read.table("init/organisasi.csv", header=TRUE, sep=",")
indikatorOrg <- read_csv("init/organisasi.csv")
indikatorOrg <-read.table("init/organisasi.csv", header=TRUE, sep=";")
# indikatorOrg <- read_csv("init/organisasi.csv")
summIndikatorOrg <-as.data.frame(unique(indikatorOrg$perbaikan))
View(summIndikatorOrg)
View(indikatorOrg)
# indikatorOrg <- read_csv("init/organisasi.csv")
summIndikatorOrg <-as.data.frame(indikatorOrg$Perbaikan)
View(summIndikatorOrg)
colnames(summIndikatorOrg) <-"Indikator"
shiny::runApp()
runApp()
runApp()
summInputOrg<-readRDS("data/dataOrganisasi")
summInputOrg$`profil/jabatan`<-NULL; summInputOrg$`meta/instanceID`<-NULL; summInputOrg$`__version__`<-NULL
summInputOrg$`_uuid`<-NULL; summInputOrg$`_submission_time`<-NULL; summInputOrg$`_tags`<-NULL; summInputOrg$`_notes`<-NULL
summInputOrg$`perangkat1/Penentuan_Visi_Misi_dan_Tujuan/alasan`<-NULL
summInputOrg$`perangkat1/Penentuan_Visi_Misi_dan_Tujuan/alasan_001`<-NULL
for (i in 2:4){
eval(parse(text=paste0("summInputOrg$`perangkat1/perangkat2/alasan_00",i,"`","<-NULL")))
}
for (i in 5:6){
eval(parse(text=paste0("summInputOrg$`perangkat1/perangkat3/alasan_00",i,"`","<-NULL")))
}
for (i in 7:9){
eval(parse(text=paste0("summInputOrg$`perangkat1/perangkat4/alasan_00",i,"`","<-NULL")))
}
summInputOrg$`perangkat1/perangkat4/alasan_010`<-NULL
for (i in 11:13){
eval(parse(text=paste0("summInputOrg$`perangkat1/perangkat5/alasan_0",i,"`","<-NULL")))
}
for (i in 14:15){
eval(parse(text=paste0("summInputOrg$`perangkat1/perangkat6/alasan_0",i,"`","<-NULL")))
}
for (i in 16:22){
eval(parse(text=paste0("summInputOrg$`perangkat1/perangkat7/alasan_0",i,"`","<-NULL")))
}
for (i in 23:29){
eval(parse(text=paste0("summInputOrg$`sdm1/sdm2/alasan_0",i,"`","<-NULL")))
}
summInputOrg$`sdm1/sdm3/alasan_030`<-NULL
summInputOrg$`sdm1/sdm4/alasan_031`<-NULL
for (i in 32:33){
eval(parse(text=paste0("summInputOrg$`sdm1/sdm5/alasan_0",i,"`","<-NULL")))
}
for (i in 34:35){
eval(parse(text=paste0("summInputOrg$`sdm1/sdm6/alasan_0",i,"`","<-NULL")))
}
for (i in 36:39){
eval(parse(text=paste0("summInputOrg$`teknologi1/teknologi2/alasan_0",i,"`","<-NULL")))
}
for (i in 40:42){
eval(parse(text=paste0("summInputOrg$`teknologi1/teknologi3/alasan_0",i,"`","<-NULL")))
}
for (i in 43:44){
eval(parse(text=paste0("summInputOrg$`teknologi1/teknologi4/alasan_0",i,"`","<-NULL")))
}
summInputOrg$`teknologi1/teknologi3/q8.2.3` <- NULL
summInputOrg$`perangkat1/perangkat4/q4.4.3`[summInputOrg$`perangkat1/perangkat4/q4.4.3` == "n/a"]  <- 3
summInputOrg[summInputOrg == "n/a"]<-NA
summInputOrg<-na.omit(summInputOrg)
summInputOrg$year <- format(as.Date(summInputOrg$`profil/tanggal`), format = "%Y")
# summInputOrg<-filter(summInputOrg,summInputOrg$year==input$selectedYear)
# summInputOrg<-filter(summInputOrg,summInputOrg$year==2019)
# year <- 2019
year <- summInputOrg$year
summInputOrg<-as.data.frame(summInputOrg)
summOrg<-as.data.frame(lapply(summInputOrg[,5:length(summInputOrg)], as.numeric))
q4.1<-rowSums(summOrg[,1:2]); q4.1<-as.data.frame(q4.1)/2
View(summOrg)
View(summOrg)
summInputOrg<-readRDS("data/dataOrganisasi")
summInputOrg$`profil/jabatan`<-NULL; summInputOrg$`meta/instanceID`<-NULL; summInputOrg$`__version__`<-NULL
summInputOrg$`_uuid`<-NULL; summInputOrg$`_submission_time`<-NULL; summInputOrg$`_tags`<-NULL; summInputOrg$`_notes`<-NULL
summInputOrg$`perangkat1/Penentuan_Visi_Misi_dan_Tujuan/alasan`<-NULL
summInputOrg$`perangkat1/Penentuan_Visi_Misi_dan_Tujuan/alasan_001`<-NULL
for (i in 2:4){
eval(parse(text=paste0("summInputOrg$`perangkat1/perangkat2/alasan_00",i,"`","<-NULL")))
}
for (i in 5:6){
eval(parse(text=paste0("summInputOrg$`perangkat1/perangkat3/alasan_00",i,"`","<-NULL")))
}
for (i in 7:9){
eval(parse(text=paste0("summInputOrg$`perangkat1/perangkat4/alasan_00",i,"`","<-NULL")))
}
summInputOrg$`perangkat1/perangkat4/alasan_010`<-NULL
for (i in 11:13){
eval(parse(text=paste0("summInputOrg$`perangkat1/perangkat5/alasan_0",i,"`","<-NULL")))
}
for (i in 14:15){
eval(parse(text=paste0("summInputOrg$`perangkat1/perangkat6/alasan_0",i,"`","<-NULL")))
}
for (i in 16:22){
eval(parse(text=paste0("summInputOrg$`perangkat1/perangkat7/alasan_0",i,"`","<-NULL")))
}
for (i in 23:29){
eval(parse(text=paste0("summInputOrg$`sdm1/sdm2/alasan_0",i,"`","<-NULL")))
}
summInputOrg$`sdm1/sdm3/alasan_030`<-NULL
summInputOrg$`sdm1/sdm4/alasan_031`<-NULL
for (i in 32:33){
eval(parse(text=paste0("summInputOrg$`sdm1/sdm5/alasan_0",i,"`","<-NULL")))
}
for (i in 34:35){
eval(parse(text=paste0("summInputOrg$`sdm1/sdm6/alasan_0",i,"`","<-NULL")))
}
for (i in 36:39){
eval(parse(text=paste0("summInputOrg$`teknologi1/teknologi2/alasan_0",i,"`","<-NULL")))
}
for (i in 40:42){
eval(parse(text=paste0("summInputOrg$`teknologi1/teknologi3/alasan_0",i,"`","<-NULL")))
}
for (i in 43:44){
eval(parse(text=paste0("summInputOrg$`teknologi1/teknologi4/alasan_0",i,"`","<-NULL")))
}
summInputOrg$`teknologi1/teknologi3/q8.2.3` <- NULL
summInputOrg$`perangkat1/perangkat4/q4.4.3`[summInputOrg$`perangkat1/perangkat4/q4.4.3` == "n/a"]  <- 3
summInputOrg[summInputOrg == "n/a"]<-NA
summInputOrg<-na.omit(summInputOrg)
summInputOrg$year <- format(as.Date(summInputOrg$`profil/tanggal`), format = "%Y")
# summInputOrg<-filter(summInputOrg,summInputOrg$year==input$selectedYear)
# summInputOrg<-filter(summInputOrg,summInputOrg$year==2019)
# year <- 2019
year <- summInputOrg$year
summInputOrg<-as.data.frame(summInputOrg)
summOrg<-as.data.frame(lapply(summInputOrg[,5:length(summInputOrg)], as.numeric))
q4.1<-rowSums(summOrg[,1:2]); q4.1<-as.data.frame(q4.1)/2
q4.2<-rowSums(summOrg[,3:5]); q4.2<-as.data.frame(q4.2)/3
q4.3<-rowSums(summOrg[,6:7]); q4.3<-as.data.frame(q4.3)/2
q4.4<-rowSums(summOrg[,8:11]); q4.4<-as.data.frame(q4.4)/4
q4.5<-rowSums(summOrg[,12:14]); q4.5<-as.data.frame(q4.5)/3
q4.6<-rowSums(summOrg[,15:16]); q4.6<-as.data.frame(q4.6)/2
q4.7<-rowSums(summOrg[,17:23]); q4.7<-as.data.frame(q4.7)/7
q5.1<-rowSums(summOrg[,24:30]); q5.1<-as.data.frame(q5.1)/7
q5.2<-summOrg$sdm1.sdm3.q5.2; q5.3<-summOrg$sdm1.sdm4.q5.3
q5.4<-rowSums(summOrg[,33:34]); q5.4<-as.data.frame(q5.4)/2
q5.5<-rowSums(summOrg[,35:36]); q5.5<-as.data.frame(q5.5)/2
q8.1<-rowSums(summOrg[,37:40]); q8.1<-as.data.frame(q8.1)/4
q8.2<-rowSums(summOrg[,41:42]); q8.2<-as.data.frame(q8.2)/2
q8.3<-rowSums(summOrg[,43:44]); q8.3<-as.data.frame(q8.3)/2
valOrganisasi <-cbind(summInputOrg$`profil/provinsi`, summInputOrg$`profil/institusi`, summInputOrg$`profil/nama`,q4.1,q4.2,q4.3,q4.4,q4.5,q4.6,q4.7,q5.1,q5.2,q5.3,q5.4,q5.5,q8.1,q8.2,q8.3)
colnames(valOrganisasi) <-c("Provinsi", "Institusi", "Nama", "q4.1", "q4.2", "q4.3", "q4.4", "q4.5", "q4.6", "q4.7", "q5.1", "q5.2", "q5.3", "q5.4", "q5.5", "q8.1", "q8.2", "q8.3" )
summTempOrganisasi <-as.data.frame(cbind(year, valOrganisasi))
indikatorOrg <-read.table("init/organisation.csv", header=TRUE, sep=",")
summIndikatorOrg <-as.character(unique(indikatorOrg$Kapasitas_Fungsional))
## Menampilkan hasil satu provinsi untuk tingkat organisasi ##
summTempOrganisasi <-filter(summTempOrganisasi,summInputOrg$`profil/provinsi`==categoryProvince$provinsi)
summTempOrganisasi <-filter(summTempOrganisasi,summInputOrg$`profil/provinsi`=="Bali")
## Menampilkan level per indikator ##
tableOrganisasi <- aggregate(summTempOrganisasi[,5:length(summTempOrganisasi)], list(summTempOrganisasi$year), mean)
roundTableOrganisasi <- round(tableOrganisasi[2:length(tableOrganisasi)], digits=2)
## Data grafik setiap indikator ##
finalTableOrganisasi <- cbind(tableOrganisasi$Group.1,roundTableOrganisasi)
colnames(finalTableOrganisasi)<-c("Tahun", summIndikatorOrg)
finalTableOrganisasi.long <- gather(finalTableOrganisasi, variable, value, -Tahun)
colnames(finalTableOrganisasi.long) <- c("Tahun", "Indikator", "Level")
tablesCDA$multiyearsOrganisasi <- finalTableOrganisasi.long
## Menampilkan table indikator ##
t_tableOrganisasi <- t(roundTableOrganisasi)
colnames(t_tableOrganisasi) <- tableOrganisasi$Group.1
summIndikatorOrg <- as.data.frame(summIndikatorOrg)
colnames(summIndikatorOrg) <-"Indikator"
t_tableOrganisasi <- cbind(summIndikatorOrg, t_tableOrganisasi)
multiyearsTable$multiOrganisasi <- t_tableOrganisasi
datatable(t_tableOrganisasi,escape = FALSE, rownames = FALSE)
finalTableOrganisasi.long <- tablesCDA$multiyearsOrganisasi
graph <- ggplot(data = finalTableOrganisasi.long, aes(x = Indikator, y = Level, fill = Tahun)) +
geom_col(position = position_dodge()) +
theme_minimal() +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
axis.text.x = element_text(size = 7, hjust = 1, face = "plain"),
axis.title.x=element_blank(),
axis.title.y=element_blank()) +
scale_x_discrete(labels = get_wraper(8))
runApp()
summInputInd<-readRDS("data/dataIndividu")
summInputInd$`profil/gender`<-NULL; summInputInd$`profil/jabatan`<-NULL; summInputInd$`profil/akun`<-NULL; summInputInd$`profil/noHP`<-NULL; summInputInd$`profil/email`<-NULL
summInputInd$`meta/instanceID`<-NULL; summInputInd$`__version__`<-NULL; summInputInd$`_uuid`<-NULL; summInputInd$`_submission_time`<-NULL; summInputInd$`_tags`<-NULL; summInputInd$`_notes`<-NULL
summInputInd$`sdm_i1/sdm_i2/alasan`<-NULL
summInputInd$`sdm_i1/sdm_i2/alasan_001`<-NULL
for (i in 2:9){
eval(parse(text=paste0("summInputInd$`sdm_i1/sdm_i3/alasan_00",i,"`","<-NULL")))
}
summInputInd$`sdm_i1/sdm_i3/alasan_010`<-NULL
for (i in 11:19){
eval(parse(text=paste0("summInputInd$`sdm_i1/sdm_i4/alasan_0",i,"`","<-NULL")))
}
for (i in 20:22){
eval(parse(text=paste0("summInputInd$`sdm_i1/sdm_i5/alasan_0",i,"`","<-NULL")))
}
summInputInd$`sdm_i1/sdm_i4/q6.3.7`<-NULL
## Menghilangkan n/a pada data frame ##
summInputInd[summInputInd == "n/a"]  <- NA
summInputInd <- na.omit(summInputInd)
summInputInd$year <- format(as.Date(summInputInd$`profil/tanggal`), format = "%Y")
year <- as.data.frame(summInputInd$year)
summInputInd <- as.data.frame(summInputInd)
summInd<- as.data.frame(lapply(summInputInd[,5:(length(summInputInd)-1)], as.numeric))
q6.1<-rowSums(summInd[,1:2]); q6.1<-as.data.frame(q6.1)/2
View(summInd)
View(summInd[,12:19])
q6.2<-rowSums(summInd[,3:11]); q6.2<-as.data.frame(q6.2)/9
q6.3<-rowSums(summInd[,12:19]); q6.3<-as.data.frame(q6.3)/8
q6.4<-rowSums(summInd[,20:22]); q6.4<-as.data.frame(q6.4)/3
valInd<-cbind(summInputInd$`profil/provinsi`, year, summInputInd$`profil/nama`, q6.1,q6.2,q6.3,q6.4)
colnames(valInd)<-c("Provinsi", "Tahun", "Nama", "q6.1","q6.2","q6.3","q6.4")
summTempIndividu<-as.data.frame(valInd)
summIndikatorInd <- c("6.1. Kesesuaian Peran dalam Implementasi RAD GRK/PPRKD dengan Tugas dan Fungsi","6.2. Pengetahuan","6.3. Keterampilan","6.4. Pengembangan dan Motivasi")
summIndikatorInd  <- as.data.frame(summIndikatorInd)
colnames(summIndikatorInd)[names(summIndikatorInd)=="summIndikatorInd"] <- "Indikator"
summTempIndividu<-filter(summTempIndividu,summInputInd$`profil/provinsi`=="Jawa Barat")
## Menampilkan level per indikator ##
tableIndividu <- aggregate(summTempIndividu[,4:length(summTempIndividu)], list(summTempIndividu$Tahun), mean)
roundTableIndividu <- round(tableIndividu[2:length(tableIndividu)], digits=2)
## Data grafik setiap indikator ##
finalTableIndividu <- cbind(tableIndividu$Group.1,roundTableIndividu)
colnames(finalTableIndividu)<-c("Tahun", "6.1. Kesesuaian Peran dalam Implementasi RAD GRK/PPRKD dengan Tugas & Fungsi","6.2. Pengetahuan","6.3. Keterampilan","6.4. Pengembangan & Motivasi")
finalTableIndividu.long <- gather(finalTableIndividu, variable, value, -Tahun)
colnames(finalTableIndividu.long) <- c("Tahun", "Indikator", "Level")
tablesCDA$multiyearsIndividu <- finalTableIndividu.long
## Menampilkan table indikator ##
t_tableIndividu <- t(roundTableIndividu)
colnames(t_tableIndividu) <- tableIndividu$Group.1
t_tableIndividu <- cbind(summIndikatorInd, t_tableIndividu)
colnames(t_tableIndividu)[names(t_tableIndividu)=="summIndikatorInd"] <- "Indikator"
multiyearsTable$multiIndividu <- t_tableIndividu
datatable(t_tableIndividu,escape = FALSE, rownames = FALSE)
finalTableIndividu.long <- tablesCDA$multiyearsIndividu
graph <- ggplot(data = finalTableIndividu.long, aes(x = Indikator, y = Level, fill = Tahun)) +
geom_col(position = position_dodge()) +
theme_minimal() +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
axis.text.x = element_text(size = 7, hjust = 1, face = "plain"),
axis.title.x=element_blank(),
axis.title.y=element_blank())+
scale_x_discrete(labels = get_wraper(25))
ggplotly(graph)
runApp()
runApp()
runApp()
runApp()
runApp()
library(httr)
library(jsonlite)
library(readr)
kobo_server_url <- "https://kf.kobotoolbox.org/"
kc_server_url <- "https://kc.kobotoolbox.org/"
form_sis <- 327419 #Sistem
form_org <- 327585 #Organisasi
form_ind <- 327418 #Individu
## Sistem ##
url_sis <- paste0(kc_server_url,"api/v1/data/",form_sis,"?format=csv")
rawdata_sis  <- GET(url_sis,authenticate("cdna2019","Icraf2019!"),progress())
dataSistem  <- read_csv(content(rawdata_sis,"raw",encoding = "UTF-8"))
## Organisasi ##
url_org <- paste0(kc_server_url,"api/v1/data/",form_org,"?format=csv")
rawdata_org <- GET(url_org,authenticate("cdna2019","Icraf2019!"),progress())
dataOrganisasi <- read_csv(content(rawdata_org,"raw",encoding = "UTF-8"))
## Individu ##
url_ind <- paste0(kc_server_url,"api/v1/data/",form_ind,"?format=csv")
rawdata_ind <- GET(url_ind,authenticate("cdna2019","Icraf2019!"),progress())
dataIndividu <- read_csv(content(rawdata_ind,"raw",encoding = "UTF-8"))
View(dataIndividu)
library(shiny); runApp('app_nasional.R')
runApp('app_nasional.R')
runApp()
runApp()
library(httr)
library(jsonlite)
library(readr)
kobo_server_url <- "https://kf.kobotoolbox.org/"
kc_server_url <- "https://kc.kobotoolbox.org/"
form_sis <- 327419 #Sistem
form_org <- 327585 #Organisasi
form_ind <- 327418 #Individu
## Individu ##
url_ind <- paste0(kc_server_url,"api/v1/data/",form_ind,".csv")
rawdata_ind <- GET(url_ind,authenticate("cdna2019","Icraf2019!"),progress())
dataIndividu <- read_csv(content(rawdata_ind,"raw",encoding = "UTF-8"))
View(dataIndividu)
runApp('app_nasional.R')
